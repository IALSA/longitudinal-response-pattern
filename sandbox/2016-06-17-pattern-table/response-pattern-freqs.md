# Title

<!-- These two chunks should be added in the beginning of every .Rmd that you want to source an .R script -->
<!--  The 1st mandatory chunck  -->
<!--  Set the working directory to the repository's base directory -->


<!--  The 2nd mandatory chunck  -->
<!-- Set the report-wide options, and point to the external code file. -->




<!-- Load 'sourced' R files.  Suppress the output when loading packages. --> 



<!-- Load the sources.  Suppress the output when loading sources. --> 



<!-- Load any Global functions and variables declared in the R file.  Suppress the output. --> 


<!-- Declare any global functions specific to a Rmd output.  Suppress the output. --> 


<!-- Load the datasets.   -->


<!-- Inspect the datasets.   -->


<!-- Tweak the datasets.   -->




<!-- Basic table view.   -->

```r
# select the variables over which you'd like to view response pattern
varnames <- names(ds %>%
                    dplyr::select(contains("stroke_cum")))
dots = c("projid", varnames)
d <- ds %>% dplyr::select_(.dots = dots)

d$pattern <- nlmeU::missPat(d)

d <- d %>%  
  dplyr::group_by(pattern) %>% 
  dplyr::summarize(counts = n()) %>% 
  dplyr::ungroup() %>% 
  dplyr::arrange(desc(counts))

d %>%
  DT::datatable(
    class     = 'cell-border stripe',
    caption   = "Pattern of missingness across time points",
    filter    = "top",
    options   = list(pageLength = 10, autoWidth = TRUE)
  )
```

<!-- Basic graph view.   -->

```r
# select the variables over which you'd like to view response pattern
varnames <- names(ds %>%
                    dplyr::select(contains("stroke_cum")))
dots = c("projid", varnames)
d <- ds %>% dplyr::select_(.dots = dots)
# recode NA 
d[is.na(d)] <- "."
# ds <- ds[,1:4]
# head(d)

# Create a string variables that records the response pattern of each individual
# see http://stackoverflow.com/questions/14568662/paste-multiple-columns-together-in-r
d$pattern <- apply( d[, varnames], 1 , paste , collapse = "" )
# remove the unnecessary rows
keep_variables <- setdiff(colnames(d), varnames)
d <- as.data.frame(d[ , keep_variables ])

ds_pattern <- d %>% 
  dplyr::group_by(pattern) %>% 
  dplyr::summarize(count = n()) %>% 
  dplyr::arrange(desc(count))

ds_pattern %>%
  DT::datatable(
    class     = 'cell-border stripe',
    caption   = "Pattern of missingness across time points",
    filter    = "none",
    options   = list(pageLength = 10, autoWidth = TRUE)
  )
```

<!--html_preserve--><div id="htmlwidget-9526" style="width:100%;height:auto;" class="datatables"></div>
<script type="application/json" data-for="htmlwidget-9526">{"x":{"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158"],["000................","000000000..........","0000...............","00000..............","0000000000..0......","0000000000.........","00.................","0000000............","0..................","...................","000000.............","00000000...........","00000000000.0......",".0000..............",".000...............","0000000000000000...","..0................",".00................","111111111..........",".0.................","111................","1111111............","00000000000000.....","111111.............","..00...............","0000.0.............","11.................","1111...............","11111111...........","1111111111.........","...0...............","..000..............","00000.0............","0000000000000......","1..................","11111..............","1111111111..1......","0.000..............","0.00000............","0.000000...........","00.00.0............","00.000.............","00.00000...........","000.000000.........","0000.0000..........","0000.00000.........","0000.00000..0......","00000.00...........","00000.0000..0......","00000000.00000.....","000000001..........","00001111...........","0001...............","....0..............","000...0............","000..0.............","000.00.............","000.00000..........","0000.00............","0000.000...........","00000.0000.........","000000.0...........","000000.000..0......","0000000.....0......","0000000.0..........","000000000.0.0......","00000000000........","000000000000000....","0000000011.........","0000001............","000001111..........","0000111111..1......","00011..............","0001111111..1......","001111111..........","01111111111.1......","111.1..............","1111.11............",".0..0..............",".0.0...............","0...0.00...........","0...00.............","0..0.0000..........","0.0................","0.00...............","0.000.0............","0.00000.00.........","00...0000..........","00..0..............","00.00..............","00.00.00...........","00.0000............","00.0000.0..........","00.00000.0.........","00.0111111.........","000...000..........","000.0..............","000.0.0............","000.0.00...........","000.0.0111.........","000.000............","000.000.00..0......","000.000000..0......","0000..0............","0000..0000..0......","0000.0..00.........","0000.0..000.0......","0000.0.0000.0......","0000.000.0.........","0000.0000000000....","0000.111...........","00000......0.......","00000.0.0...0......","00000.0.00.........","00000.00.0.........","00000.000..........","000000..00.........","000000.00..........","000000.000.........","000000.0000.0......","000000.000000000...","0000000.00.........","0000000.000.0......","00000000.000.......","000000000...0......","000000000.0000.....","000000000.00000....","0000000000.00......","000000000000.000...","000000000000001....","000000000001011....","00000000001.1......","0000000000110111...","0000000001..11.....","000000000111111....","0000000011..1......","000000011..........","0000001111111......","000001.11..........","00000111...........","0000011111..1......","00000111111111.....","00011111...........","0001111111111......","0001111111111111...","001................","0011...............","011................","0111...............","0111111............","01111111...........","01111111.1.........","0111111111.........","0111111111..1......","11.11..............","11111.1.111.1......","11111111111.1......","1111111111111......"],[92,88,65,60,59,57,54,41,40,39,34,34,30,17,12,11,9,9,9,8,8,8,7,7,6,6,6,6,6,6,5,5,5,5,5,5,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th> </th>\n      <th>pattern</th>\n      <th>count</th>\n    </tr>\n  </thead>\n</table>","options":{"pageLength":10,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"orderClasses":false},"callback":null,"caption":"<caption>Pattern of missingness across time points</caption>","filter":"none"},"evals":[]}</script><!--/html_preserve-->




